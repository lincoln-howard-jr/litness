{"version":3,"sources":["hooks/useFriends.tsx","hooks/useLocation.tsx","hooks/usePins.tsx","lib/base.ts","hooks/useRouter.tsx","hooks/useUser.tsx","AppProvider.tsx","img/plus.png","img/pin.png","img/fire.png","img/pen.svg","img/caret.svg","img/user.png","img/checkmark.svg","img/location.png","components/UserDetail.tsx","components/Auth.tsx","lib/phonenumber.ts","components/DropPin.tsx","img/cancel.png","components/Friends.tsx","components/ListView.tsx","components/Log.tsx","components/Map.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["mockUseFriends","friends","createFriendship","Promise","r","arcgis","window","arcgisRest","authentication","ApiKey","key","mockUseLocation","locationAvailable","places","coords","lat","lng","setCoords","getPlaces","mockUsePins","iter","pins","featureSet","type","features","distribution","pinErr","getPins","createPin","path","location","origin","charAt","length","substring","mockUseRouter","page","qsp","URLSearchParams","redirect","userExists","number","resolve","reject","a","fetch","req","json","poolDetails","ClientId","UserPoolId","mockUseUser","isAuthenticated","promptForCode","headers","get","post","authError","userDetails","getCode","answer","createDetail","getDetails","hasDetail","detail","logout","defaultValue","freeze","user","router","AppContext","createContext","useApp","useContext","AppProvider","props","useState","frozen","setFrozen","authDetails","Pool","AmazonCognitoIdentity","getCurrentUser","accessToken","setAccessToken","refreshToken","setRefreshToken","setError","setDetails","setIsAuthenticated","setPromptForCode","setAnswer","retrieveAccessTokens","getSession","error","session","getAccessToken","getJwtToken","RefreshToken","getRefreshToken","getToken","refreshSession","err","register","phoneNumber","attrs","Name","Value","signUp","result","unfreeze","exists","Username","ClientMetadata","setAuthenticationFlowType","initiateAuth","onSuccess","onFailure","e","customChallenge","sendCustomChallengeAnswer","attributeName","attributeValue","method","body","JSON","stringify","data","ds","sort","b","dateCreated","init","useEffect","name","find","d","signOut","useUser","setLocationAvailable","setPlaces","setLat","setLng","geocode","params","category","distance","maxLocations","outFields","response","candidates","console","log","success","pos","latitude","longitude","wid","navigator","geolocation","watchPosition","enableHighAccuracy","timeout","clearWatch","useLocation","setIter","setPins","setFeatureSet","setDistribution","byName","reduce","acc","val","includes","placeName","litnesses","map","filter","pin","list","i","arr","litness","info","p","address","placeAddress","dist","geoJson","geometry","coordinates","fromLonLat","properties","toString","usePins","setFriends","getFriends","relationshipTo","useFriends","initialPage","pathname","search","setPage","history","pushState","base","useRouter","value","Provider","className","children","UserDetail","app","editing","setEditing","setValue","label","onBlur","setTimeout","autoFocus","onChange","target","onClick","src","check","pen","Auth","stripped","open","setOpen","rawNumber","setRawNumber","backdropRef","useRef","ref","close","current","person","autoComplete","placeholder","replaceAll","substr","reduced","Error","fmtPhoneNumber","DropPin","has","dropping","setDropping","setLitness","customLocation","setCustomLocation","reset","exit","finish","addy","_litness","alert","startDropping","place","attributes","PlaceName","Place_addr","fire","Friends","friend","relationshipFrom","Date","ListView","_","Log","style","display","feature","Style","image","IconStyle","scale","parseInt","Map","mapref","setMap","zoom","center","setCenter","options","view","OlView","minZoom","maxZoom","layers","OlTileLayer","source","OSM","OlVectorLayer","OlVectorSource","GeoJSON","readFeatures","controls","overlays","_map","OlMap","setTarget","getView","setZoom","getLayers","removeAt","opts","layer","push","id","undefined","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.652b0d90.chunk.js","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { UserDetail, UserHook } from \"./useUser\";\n\ninterface Friend {\n  id: string;\n  relationshipTo: string;\n  relationshipFrom: string;\n  isSubscribed: boolean;\n  litnessThreshold: number;\n  dateCreated: number;\n  userDetails: UserDetail[];\n}\n\nexport interface FriendsHook {\n  friends: Friend[];\n  createFriendship: (relationshipTo: string) => Promise<void>;\n}\n\nexport const mockUseFriends:FriendsHook = {\n  friends: [],\n  createFriendship: () => new Promise (r => r)\n}\n\nexport default function useFriends (user: UserHook):FriendsHook {\n  const [friends, setFriends] = useState<Friend[]> ([]);\n\n  const getFriends = async () => new Promise<void> (async (resolve, reject) => {\n    try {\n      const req = await fetch ('https://1ge3owx5sf.execute-api.us-east-1.amazonaws.com/Prod/relationships', {\n        headers: user.headers.get\n      });\n      const data = (await req.json ()) as Friend[];\n      setFriends (data);\n      resolve ();\n    } catch (e) {\n      reject (e);\n    }\n  })\n\n  const createFriendship = async (relationshipTo: string) => new Promise<void> (async (resolve, reject) => {\n    try {\n      const req = await fetch ('https://1ge3owx5sf.execute-api.us-east-1.amazonaws.com/Prod/relationships', {\n        method: 'post',\n        headers: user.headers.post,\n        body: JSON.stringify ({\n          relationshipTo\n        })\n      });\n      resolve ();\n    } catch (e) {\n      reject (e);\n    }\n  })\n\n  useEffect (() => {\n    if (user.isAuthenticated) getFriends ();\n  }, [user.isAuthenticated])\n\n  return {\n    friends,\n    createFriendship\n  };\n}","import { useEffect, useState } from \"react\"\n\nconst apiKey = 'AAPK827c8d799c9f479bb6527fdfe01819026nJ4HXONEvXwkFIsjOMskDVGFYKeCgUGlZi9lgE2xnlQ7ROGR9D3ypGuaHv4XcNb';\nconst arcgis = (window as any).arcgisRest;\nlet authentication = new arcgis.ApiKey({\n  key: apiKey\n});\n\nexport interface LocationHook {\n  locationAvailable: boolean;\n  places: any;\n  coords: {\n    lat: number | null,\n    lng: number | null\n  };\n  setCoords: (lat: number, lng: number) => void;\n  getPlaces: () => Promise<void>;\n}\nexport const mockUseLocation:LocationHook = {\n  locationAvailable: false,\n  places: null,\n  coords: {\n    lat: null,\n    lng: null\n  },\n  setCoords: (lat: number, lng: number) => {},\n  getPlaces: () => new Promise (r => {})\n}\nexport default function useLocation ():LocationHook {\n  const [locationAvailable, setLocationAvailable] = useState<boolean> (false);\n  const [places, setPlaces] = useState<any []> ([]);\n  const [lat, setLat] = useState<number | null> (null);\n  const [lng, setLng] = useState<number | null> (null);\n\n  const setCoords = (lat: number, lng: number) => {\n    setLat (lat);\n    setLng (lng);\n  }\n\n  const getPlaces = async () => new Promise<void> (async (resolve, reject) => {\n    try {\n      let response = await arcgis.geocode ({\n        params: {\n          category: 'Nightlife Spot',\n          location: `${lng},${lat}`,\n          distance: 25,\n          maxLocations: 5\n        },\n        outFields: '*',\n        authentication\n      })\n      setPlaces (response.candidates)\n      resolve ();\n    } catch (e) {\n      console.log (e);\n      reject ();\n    }\n  })\n\n  const success = (pos:GeolocationPosition) => {\n    console.log ('success');\n    setLat (pos.coords.latitude);\n    setLng (pos.coords.longitude);\n    setLocationAvailable (true);\n  }\n\n  const error = (e: any) => {\n    setLocationAvailable (false);\n    setLat (null);\n    setLng (null);\n    console.log ('#watch position error', e);\n  }\n\n  const init = () => {\n    let wid = window.navigator.geolocation.watchPosition (success, error, {\n      enableHighAccuracy: true,\n      timeout: 3000\n    });\n    return () => {\n      window.navigator.geolocation.clearWatch (wid);\n    }\n  }\n\n  useEffect (init, []);\n\n  return {\n    locationAvailable,\n    places,\n    coords: {\n      lat,\n      lng\n    },\n    setCoords,\n    getPlaces\n  }\n}","import { fromLonLat } from \"ol/proj\";\nimport { useEffect, useState } from \"react\";\nimport { FreezeFn } from \"../AppProvider\";\nimport { LocationHook } from \"./useLocation\";\nimport { UserHook } from \"./useUser\";\n\ninterface Distribution {\n  name: string;\n  address: string;\n  litness: number;\n  lat: number;\n  lng: number;\n}\n\ninterface Pin {\n  litness: number;\n  lat: number;\n  lng: number;\n  datetimeDropped: number;\n  placeName: string;\n  placeAddress: string;\n}\n\ninterface Feature {\n  type: string,\n  geometry: {\n    type: string,\n    coordinates: number[],\n  },\n  properties: any\n}\n\ninterface PointFeatureSet {\n  type: string;\n  features: Feature[];\n}\n\nexport interface PinsHook {\n  iter: number;\n  pins: Pin[];\n  featureSet: PointFeatureSet;\n  distribution: Distribution[];\n  pinErr: null | string;\n  getPins: () => void;\n  createPin: (litness: number, placeName: string, placeAddress: string) => Promise<void>;\n}\n\nexport const mockUsePins:PinsHook = {\n  iter: 0,\n  pins: [],\n  featureSet: {\n    type: 'FeatureCollection',\n    features: []\n  },\n  distribution: [],\n  pinErr: null,\n  getPins: () => {},\n  createPin: ()=>new Promise (r => r)\n}\n\nexport default function usePins (user: UserHook, location: LocationHook, freeze: FreezeFn):PinsHook {\n  const [iter, setIter] = useState<number> (mockUsePins.iter);\n  const [pins, setPins] = useState<Pin[]> (mockUsePins.pins);\n  const [featureSet, setFeatureSet] = useState<PointFeatureSet> (mockUsePins.featureSet)\n  const [distribution, setDistribution] = useState<Distribution[]> ([]);\n  const [pinErr, setError] = useState<null | string> (mockUsePins.pinErr);\n  const getPins = async () => {\n    try {\n      let req = await fetch (`https://1ge3owx5sf.execute-api.us-east-1.amazonaws.com/Prod/pins?lat=${location.coords.lat}&lng=${location.coords.lng}&r=0.1`);\n      let data = await req.json () as Pin[];\n      let byName = data.reduce<string[]> ((acc, val) => {\n        if (acc.includes (val.placeName)) return acc;\n        return [...acc, val.placeName];\n      }, []);\n      let litnesses = byName.map (name => data.filter (pin => pin.placeName === name)).map ((list, i, arr) => {\n        return list.reduce ((acc, val) => {\n          return acc + val.litness;\n        }, 0) / arr.length;\n      });\n      let info = byName.map (name => {\n        let pin = data.find (p => p.placeName === name);\n        return {\n          address: pin?.placeAddress || 'unknown',\n          lat: pin?.lat || 0,\n          lng: pin?.lng || 0,\n        }\n      });\n      let dist = byName.map ((name, i) => ({name, litness: litnesses [i], ...info [i]}))\n      dist.sort ((a, b) => a.litness - b.litness);\n      setDistribution (dist);\n      const geoJson:PointFeatureSet = {\n        type: 'FeatureCollection',\n        features: data.map ((litness: Pin) => ({\n          type: 'Feature',\n          geometry: {\n            type: 'Point',\n            coordinates: fromLonLat ([litness.lng, litness.lat])\n          },\n          properties: {\n            ...litness\n          }\n        }))\n      }\n      setPins (data);\n      setFeatureSet (geoJson);\n      setIter (iter + 1);\n    } catch (e: any) {\n      setError (e?.toString () || 'unknown server error');\n    }\n  }\n  const createPin = (litness: number, placeName: string, placeAddress: string) => new Promise<void> (async (resolve, reject) => {\n    let unfreeze = freeze ();\n    try {\n      let body = {\n        ...location.coords,\n        litness,\n        placeName,\n        placeAddress\n      }\n      await fetch ('https://1ge3owx5sf.execute-api.us-east-1.amazonaws.com/Prod/pins', {\n        method: 'post',\n        headers: user.headers.post,\n        body: JSON.stringify (body)\n      })\n      resolve ();\n    } catch (e: any) {\n      setError (e?.toString () || 'unknown error');\n      reject (e);\n    } finally {\n      unfreeze ();\n    }\n  })\n\n  useEffect (() => {\n    if (location.locationAvailable) getPins ();\n  }, [location.locationAvailable]);\n  \n  return {\n    iter,\n    pins,\n    featureSet,\n    distribution,\n    pinErr,\n    getPins,\n    createPin\n  }\n}","let path = window.location.origin;\nif (path.charAt (path.length - 1) === '/') path = path.substring (0, path.length - 1);\nexport default path;","import {useState} from 'react';\nimport base from '../lib/base';\n\nexport interface RouterHook {\n  page: string;\n  qsp: URLSearchParams;\n  redirect: (path: string) => void;\n}\n\nexport const mockUseRouter = {\n  page: '',\n  qsp: new URLSearchParams (''),\n  redirect: (path:string) => {}\n}\n\nexport default function useRouter () {\n  // router section\n  let initialPage = window.location.pathname;\n  const [qsp, setQsp] = useState<URLSearchParams> (new URLSearchParams (window.location.search));\n  const [page, setPage] = useState<string> (initialPage);\n  const redirect = (path:string) => {\n    window.history.pushState ({}, 'Litness', `${base}${path}`)\n    setPage (path);\n  }\n\n  return {page, qsp, redirect};\n\n}","import * as AmazonCognitoIdentity from 'amazon-cognito-identity-js';\nimport { useEffect, useState } from 'react';\nimport { FreezeFn } from '../AppProvider';\n\n// get if number is in use\nconst userExists = (number:string) => new Promise<boolean> (async (resolve, reject) => {\n  try {\n    const req = await fetch (`https://1ge3owx5sf.execute-api.us-east-1.amazonaws.com/Prod/usernames/${number}`);\n    resolve (await req.json ());\n  } catch (e) {\n    reject (e);\n  }\n});\n\nconst poolDetails = {\n  ClientId: '2nl7v5gphbluvp0lhu8aooqhe3',\n  UserPoolId:\t'us-east-1_Xsf7vUqcY'\n}\n\ninterface AnswerFunction {\n  (answer: string): void;\n}\n\nexport interface UserDetail {\n  attributeName: string;\n  attributeValue: string;\n  dateCreated: number;\n  id: string;\n}\n\nexport interface UserHook {\n  isAuthenticated: boolean;\n  promptForCode: boolean;\n  headers: {\n    get: {\n      'x-amz-access-token'?: string\n    }\n    post: {\n      'Content-Type': string,\n      'x-amz-access-token'?: string\n    }\n  };\n  authError: string | null;\n  userDetails: UserDetail[];\n  getCode: (phoneNumber: string) => void;\n  answer: AnswerFunction;\n  createDetail: (attributeName: string, attributeValue: string) => Promise<void>;\n  getDetails: () => Promise<void>;\n  hasDetail: (name: string) => boolean;\n  detail: (name: string) => string | undefined;\n  logout: () => Promise<void>;\n}\n\nexport const mockUseUser:UserHook = {\n  isAuthenticated: false,\n  promptForCode: false,\n  headers: {\n    get: {},\n    post: {\n      'Content-Type': 'application/json'\n    }\n  },\n  authError: null,\n  userDetails: [],\n  getCode: () => {},\n  answer: () => {},\n  createDetail: () => new Promise (r => r()),\n  getDetails: () => new Promise (r => r()),\n  hasDetail: () => false,\n  detail: () => undefined,\n  logout: () => new Promise<void> (r => r())\n} \n\nexport default function useUser (freeze: FreezeFn):UserHook {\n  // local vars\n  let Pool = new AmazonCognitoIdentity.CognitoUserPool (poolDetails);\n  let user = Pool.getCurrentUser ();;\n  let authDetails:any;\n  // state so the headers work\n  const [accessToken, setAccessToken] = useState<string> ('');\n  const [refreshToken, setRefreshToken] = useState <AmazonCognitoIdentity.CognitoRefreshToken | null> (null);\n  // request headers\n  const headers = {\n    get: {\n      'x-amz-access-token': accessToken\n    },\n    post: {\n      'Content-Type': 'application/json',\n      'x-amz-access-token': accessToken\n    }\n  }\n\n  // state\n  const [authError, setError] = useState<string | null> (null);\n  const [userDetails, setDetails] = useState<UserDetail[]> ([]);\n  const [isAuthenticated, setIsAuthenticated] = useState<boolean> (false);\n  const [promptForCode, setPromptForCode] = useState<boolean> (false);\n  const [answer, setAnswer] = useState<AnswerFunction> ((answer:string) => {});\n\n  // private method gets access and refresh tokens - call after authenticating \n  const retrieveAccessTokens = async () => {\n    if (user) user.getSession ((error:any, session:any) => {\n      if (error) return Promise.reject (error);\n      setAccessToken (session.getAccessToken ().getJwtToken ());\n      setRefreshToken (new AmazonCognitoIdentity.CognitoRefreshToken ({RefreshToken: session.getRefreshToken ().getToken ()}));\n      setIsAuthenticated (true);\n      return Promise.resolve ();\n    });\n    else return Promise.reject ('user dne');\n  }\n\n  // private method - refresh session should be called on init\n  const refreshSession = async () => {\n    if (user && refreshToken) user.refreshSession (refreshToken, (err: any) => {\n      if (err) return Promise.reject (err);\n      return retrieveAccessTokens ();\n    })\n  }\n\n  // public method - register user with username/password/email\n  const register = async (phoneNumber: string) => new Promise<void> (async (resolve, reject) => {\n    let attrs = [\n      new AmazonCognitoIdentity.CognitoUserAttribute ({\n        Name: 'phone_number',\n        Value: phoneNumber\n      })\n    ]\n    Pool.signUp (phoneNumber, 'Passwords are useless!', attrs, [], (err, result) => {\n      if (err) return reject (err);\n      if (result?.user) user = result.user;\n      return resolve ();\n    })\n  })\n\n  const getCode = async (phoneNumber:string) => {\n    let unfreeze = freeze ();\n    // check if user exists\n    let exists = true;\n    try {\n      exists = await userExists (phoneNumber);\n    } catch (e) {\n      setError ('error while checking if user exists');\n    }\n    // if user doesn't exist, register user\n    if (!exists) {  \n      try {\n        await register (phoneNumber);\n      } catch (e) {\n        setError ('error while registering user');\n        return;\n      } \n    }\n    authDetails = new AmazonCognitoIdentity.AuthenticationDetails ({Username: phoneNumber, ClientMetadata: {phoneNumber}});\n    user = new AmazonCognitoIdentity.CognitoUser ({Username: phoneNumber, Pool});\n    user.setAuthenticationFlowType ('CUSTOM_CHALLENGE');\n    user.initiateAuth (authDetails, {\n      onSuccess: () => {\n        retrieveAccessTokens ();\n        unfreeze ();\n      },\n      onFailure: e => {\n        setError (e);\n        unfreeze ();\n      },\n      customChallenge: function () {\n        setAnswer (() => (answer:string) => {\n          user?.sendCustomChallengeAnswer (answer, this);\n          unfreeze = freeze ();\n        })\n        setPromptForCode (true);\n      }\n    });\n  }\n  \n  // create a user detail\n  const createDetail = async (attributeName:string, attributeValue:string) => new Promise<void> (async (resolve, reject) => {\n    try {\n      const req = await fetch ('https://1ge3owx5sf.execute-api.us-east-1.amazonaws.com/Prod/user-details', {\n        method: 'post',\n        headers: headers.post,\n        body: JSON.stringify ({attributeName, attributeValue})\n      });\n      const data = await req.json ();\n      setDetails (ds => [data, ...ds]);\n      resolve ();\n    } catch (e) {\n      reject (e);\n    }\n  });\n\n  // get user details\n  const getDetails = async () => new Promise<void> (async (resolve, reject) => {\n    try {\n      const req = await fetch ('https://1ge3owx5sf.execute-api.us-east-1.amazonaws.com/Prod/user-details', {\n        headers: headers.get\n      })\n      const data = (await req.json ()) as UserDetail[];\n      data.sort ((a, b) => b.dateCreated - a.dateCreated);\n      setDetails (data);\n      resolve ();\n    } catch (e) {\n      reject (e);\n    }\n  });\n\n  // access details\n  const hasDetail = (name: string) => !!userDetails.find (d => d.attributeName === name);\n  const detail = (name: string) => userDetails.find (d => d.attributeName === name)?.attributeValue;\n\n  // public method - sign user out\n  const logout = () => new Promise<void> (async (resolve, reject) => {\n    if (user) {\n      return resolve (user.signOut ());\n    }\n    else return reject ('user dne');\n  })\n\n  const init = async () => {\n    await retrieveAccessTokens ();\n    await refreshSession ();\n  }\n\n  useEffect (() => {\n    init ();\n  }, [])\n\n  useEffect (() => {\n    if (isAuthenticated) getDetails ();\n  }, [isAuthenticated])\n\n  return {\n    isAuthenticated,\n    promptForCode,\n    headers,\n    userDetails,\n    authError,\n    getCode,\n    answer,\n    createDetail,\n    getDetails,\n    hasDetail,\n    detail,\n    logout\n  }\n\n}","import { createContext, useContext, useState } from \"react\";\nimport useFriends, { FriendsHook, mockUseFriends } from \"./hooks/useFriends\";\nimport useLocation, { LocationHook, mockUseLocation } from \"./hooks/useLocation\";\nimport usePins, { mockUsePins, PinsHook } from \"./hooks/usePins\";\nimport useRouter, { mockUseRouter, RouterHook } from \"./hooks/useRouter\";\nimport useUser, { mockUseUser, UserHook } from \"./hooks/useUser\";\n\ninterface AppProviderProps {\n  children: JSX.Element\n}\n\nexport interface FreezeFn {\n  (): () => void;\n}\n\ninterface ContextValue {\n  freeze: FreezeFn;\n  user: UserHook;\n  pins: PinsHook;\n  location: LocationHook;\n  router: RouterHook;\n  friends: FriendsHook;\n}\n\nconst defaultValue:ContextValue = {\n  freeze: ()=>()=>{},\n  user: mockUseUser,\n  pins: mockUsePins,\n  location: mockUseLocation,\n  router: mockUseRouter,\n  friends: mockUseFriends\n}\n\n// react context api\nconst AppContext = createContext<ContextValue> (defaultValue);\nexport const useApp = () => useContext (AppContext);\n\nexport default function AppProvider (props: AppProviderProps) {\n  \n  const [frozen, setFrozen] = useState<string> ('none');\n  const freeze = () => {\n    setFrozen ('frozen')\n\n    return function unfreeze () {\n      setFrozen ('none');\n    }\n  }\n\n  const user = useUser (freeze);\n  const location = useLocation ();\n  const pins = usePins (user, location, freeze);\n  const friends = useFriends (user);\n  const router = useRouter ();\n\n  const value:ContextValue = {\n    freeze,\n    user,\n    pins,\n    location,\n    router,\n    friends\n  }\n\n  return (\n    <AppContext.Provider value={value}>\n      <div className={`freeze ${frozen}`} />\n      {props.children}\n    </AppContext.Provider>\n  )\n  \n}","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/pin.c45e97d1.png\";","export default __webpack_public_path__ + \"static/media/fire.4fa412f3.png\";","export default __webpack_public_path__ + \"static/media/pen.27ec406e.svg\";","export default __webpack_public_path__ + \"static/media/caret.bfd98d54.svg\";","export default __webpack_public_path__ + \"static/media/user.9e5ca7c8.png\";","export default __webpack_public_path__ + \"static/media/checkmark.1d073034.svg\";","export default __webpack_public_path__ + \"static/media/location.fe81c3c0.png\";","import { useState } from \"react\";\nimport { useApp } from \"../AppProvider\";\nimport { check, pen } from \"../img\";\n\ninterface UserDetailProps {\n  name: string;\n  label: string;\n}\n\nexport default function UserDetail (props: UserDetailProps) {\n  const app = useApp ();\n\n  const [editing, setEditing] = useState<boolean> (false);\n  const [value, setValue] = useState<string> (app.user.detail (props.name) || '');\n  const deferFinishEditing = () => {\n    setTimeout (() => setEditing (false), 300);\n  }\n  \n  if (!app.user.hasDetail (props.name)) return (\n    <section>\n      <label>{props.label}</label>\n      <input value={value} onChange={e => setValue (e.target.value)} />\n      <span onClick={() => app.user.createDetail (props.name, value)} className=\"clickable\">\n        <img src={check} />\n      </span>\n    </section>\n  )\n  if (editing) return (\n    <section>\n      <label>{props.label}</label>\n      <input onBlur={deferFinishEditing} autoFocus value={value} onChange={e => setValue (e.target.value)} />\n      <span onClick={() => {app.user.createDetail (props.name, value); setEditing (false)}} className=\"clickable\">\n        <img src={check} />\n      </span>\n    </section>\n  )\n  return (\n    <section>\n      <label>{props.label}</label>\n      <p>{app.user.detail (props.name)}</p>\n      <span onClick={() => setEditing (true)} className=\"clickable\">\n        <img src={pen} />\n      </span>\n    </section>\n  )\n}","import { MouseEvent, useRef, useState } from \"react\";\nimport { useApp } from \"../AppProvider\";\nimport { cancel, pen, person } from \"../img\";\nimport fmtPhoneNumber, { stripPhoneNumber } from \"../lib/phonenumber\";\nimport UserDetail from \"./UserDetail\";\n\nconst fmtRawPhoneNumber = (stripped:string) => {\n  if (stripped.length > 10) stripped = stripped.substr (0, 10);\n  if (stripped.length === 0) return stripped;\n  if (stripped.length < 4) return `(${stripped}`;\n  if (stripped.length < 7) return `(${stripped.substr (0, 3)}) ${stripped.substr (3)}`;\n  return `(${stripped.substr (0, 3)}) ${stripped.substr (3, 3)}-${stripped.substr (6)}`;\n}\n\nexport default function Auth () {\n  // global state\n  const {user: {isAuthenticated, promptForCode, authError, hasDetail, detail, getCode, answer}} = useApp ();\n  // local state\n  const [open, setOpen] = useState<boolean> (false);\n  const [rawNumber, setRawNumber] = useState<string> ('');\n  const [error, setError] = useState<string | null> (null)\n  const backdropRef = useRef<HTMLDivElement> (null);\n  const ref = useRef<HTMLInputElement> (null);\n\n  const runGetCode = () => {\n    try {\n      getCode (fmtPhoneNumber (rawNumber))\n    } catch (e: any) {\n      setError (e?.toString () || 'number not correct');\n    }\n  }\n\n  const close = (e:MouseEvent<HTMLDivElement>) => {\n    if (e.target === backdropRef.current) setOpen (false);\n  }\n\n  if (isAuthenticated && open) return (\n    <div ref={backdropRef} className=\"overlay-backdrop\" onClick={close}>\n      <div className=\"overlay-panel profile view\">\n        <header>\n          <span />\n          <h2>It's Lit, Fam!</h2>\n          <span />\n        </header>\n        <header>\n          <span />\n          <p>Enter some basic information about yourself. Only your buds can see this!</p>\n          <span />\n        </header>\n        <UserDetail name=\"Nickname\" label=\"What is your nickname?\" />\n        <UserDetail name=\"Favorite Place\" label=\"What is your favorite place?\" />\n        <header>\n          <span />\n          <h2>Your Friends</h2>\n          <span/>\n        </header>\n      </div>\n    </div>\n  )\n  if (isAuthenticated) return (\n    <button className=\"action-button auth-button\" onClick={() => setOpen (true)}>\n      <img src={person} />\n    </button>\n  )\n  if (promptForCode) return (\n    <>\n      <div ref={backdropRef} className=\"overlay-backdrop\" onClick={close}>\n        <div className=\"overlay-panel auth code\">\n          <header>\n            <p>We texted you a code! Enter it here!</p>\n          </header>\n          <input ref={ref} autoComplete=\"one-time-code\" placeholder=\"Secret Code!\" />\n          <button onClick={() => {if (ref.current?.value) answer (ref.current.value)}}>Send Code</button>\n        </div>\n      </div>\n    </>\n  )\n  if (open) return (\n    <>\n      <div ref={backdropRef} className=\"overlay-backdrop\" onClick={close}>\n        <div className=\"overlay-panel auth login\">\n          <header>\n            <h1>Litness Sign In</h1>\n          </header>\n          <hr />\n          {\n            authError &&\n            <div className=\"error\">{authError}</div>\n          }\n          {\n            error &&\n            <div className=\"error\">{error}</div>\n          }\n          <input type=\"text\" placeholder=\"(012) 345-6789\" autoComplete=\"off\" onChange={e => setRawNumber (stripPhoneNumber (e.target.value))} value={fmtRawPhoneNumber (rawNumber)} ></input>\n          <button onClick={runGetCode}>Sign In</button>\n        </div>\n      </div>\n    </>\n  )\n  return (\n    <button className=\"action-button auth-button\" onClick={() => setOpen (true)}>\n      <img src={person} />\n    </button>\n  )\n}","export default (number:string) => {\n  let reduced = number.replaceAll (/[^0-9]/g, '');\n  if (reduced.length !== 10) throw new Error ('Phone number must be 10 digits, current length: ' + reduced.length);\n  return '+1' + reduced;\n}\n\nexport const stripPhoneNumber = (number:string) => number.replaceAll (/[^0-9]/g, '');","import { MouseEvent, useEffect, useRef, useState } from \"react\";\nimport { useApp } from \"../AppProvider\";\nimport { cancel, fire, pin, plus } from \"../img\";\n\nexport default function DropPin () {\n  const app = useApp ();\n\n  const ref = useRef<HTMLDivElement> (null);\n  const [dropping, setDropping] = useState<boolean> (app.router.qsp.has ('is-dropping'));\n  const [litness, setLitness] = useState<number> (0);\n  const [customLocation, setCustomLocation] = useState<string> ('');\n\n  const backdropRef = useRef<HTMLDivElement> (null);\n\n  const close = (e:MouseEvent<HTMLDivElement>) => {\n    if (e.target === backdropRef.current) reset ();\n  }\n\n  const reset = () => {\n    setDropping (false);\n    setLitness (0);\n  }\n\n  const exit = (e:MouseEvent<HTMLDivElement> | null) => {\n    if (!e || e.target === ref.current) reset ();\n  }\n\n  const finish = async (name: string, addy: string, _litness=litness) => {\n    try {\n      await app.pins.createPin (_litness, name, addy);\n    } catch (e: any) {\n      alert (e?.toString () || 'error while creating pin');\n    } finally {\n      exit (null);\n    }\n  }\n\n  const startDropping = (litness: number) => async () => {\n    try {\n      if (app.router.qsp.has ('is-dropping')) {\n        let name = app.router.qsp.get ('name');\n        let addy = app.router.qsp.get ('addy');\n        if (!name || !addy) throw new Error ('Addy and name not defined by query string');\n        return await finish (name, addy, litness);\n      }\n      setDropping (false);\n      setLitness (litness)\n      await app.location.getPlaces ();\n    } catch (e) {\n      alert ('error while getting nearby places');\n    }\n  }\n\n  if (litness > 0) return (\n    <div ref={backdropRef} onClick={close} className=\"overlay-backdrop drop-pin-backdrop\">\n      <div className=\"overlay-panel drop-pin place-list\">\n        <header>\n          <h1>Select current location:</h1>\n        </header>\n        {\n          app.location.places.map ((place: any) => (\n            <div onClick={() => {finish (place.attributes.PlaceName, place.attributes.Place_addr)}} className=\"select-option\">\n              <h3>{place.attributes.PlaceName}</h3>\n              <address>{place.attributes.Place_addr}</address>\n            </div>\n          ))\n        }\n        <hr />\n        <div className=\"select-dropdown-custom-place\">\n          <label>\n            <input value={customLocation} onChange={e => setCustomLocation (e.target.value)} placeholder=\"Enter location here\" />\n            <span onClick={() => {finish (customLocation, 'unknown')}}>\n              <img src={plus} />\n            </span>\n          </label>\n        </div>\n      </div>\n    </div>\n  )\n  if (dropping) return (\n    <div ref={backdropRef} onClick={close} className=\"overlay-backdrop drop-pin-backdrop\">\n      <div className=\"drop-pin-list\">\n        <button onClick={() => setDropping (false)} className=\"fire-button cancel\">\n          <img src={cancel} />\n        </button>\n        <button onClick={startDropping (1)} className=\"fire-button one\">\n          <img src={fire} />\n        </button>\n        <button onClick={startDropping (2)} className=\"fire-button two\">\n          <img src={fire} />\n          <img src={fire} />\n        </button>\n        <button onClick={startDropping (3)} className=\"fire-button three\">\n          <img src={fire} />\n          <img src={fire} />\n          <img src={fire} />\n        </button>\n        <button onClick={startDropping (4)} className=\"fire-button four\">\n          <img src={fire} />\n          <img src={fire} />\n          <img src={fire} />\n          <img src={fire} />\n        </button>\n        <button onClick={startDropping (5)} className=\"fire-button five\">\n          <img src={fire} />\n          <img src={fire} />\n          <img src={fire} />\n          <img src={fire} />\n          <img src={fire} />\n        </button>\n      </div>\n    </div>\n  )\n  return (\n    <button onClick={() => setDropping (true)} className=\"action-button drop-pin-button\">\n      <img src={pin} />\n    </button>\n  )\n}","export default \"data:image/png;base64,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\"","import { useApp } from \"../AppProvider\";\n\nexport default function Friends () {\n  const app = useApp ();\n\n  return (\n    <>\n      {\n        app.friends.friends.map (friend => (\n          <section>\n            <label>{friend.userDetails.find (d => d.attributeName === 'Nickname') || friend.relationshipFrom}</label>\n            <p>Friends since {new Date (friend.dateCreated).toString ()}</p>\n            <span></span>\n          </section>\n        ))\n      }\n    </>\n  )\n}","import React, { MouseEvent, useRef, useState } from \"react\";\nimport { useApp } from \"../AppProvider\";\nimport { fire } from \"../img\";\n\ninterface Switcher {\n  [key: string]: string\n}\n\nconst switcher:Switcher = {\n  'pin-list-view': 'pin-list-view hidden',\n  'pin-list-view hidden': 'pin-list-view'\n}\n\nexport default function ListView () {\n  const app = useApp ();\n  const backdropRef = useRef<HTMLDivElement> (null);\n\n  const [open, setOpen] = useState<boolean> (false);\n  const close = (e:MouseEvent<HTMLDivElement>) => {\n    if (e.target === backdropRef.current) setOpen (false);\n  }\n  \n  if (!open) return (\n    <button className=\"action-button list-view-button\" onClick={() => setOpen (true)}>\n      <img src={fire} />\n    </button>\n  )\n  return (\n    <div ref={backdropRef} className=\"overlay-backdrop\" onClick={close}>\n      <div className=\"overlay-panel pin-list-view\">\n        <header>\n          <span><img src={fire} /></span>\n          <h1>\n            {\n              app.pins.distribution.length > 0 ?\n              'Top Spots' :\n              'It\\'s Dead, Jim'\n            }\n          </h1>\n        </header>\n        <hr />\n        <ul>\n          {\n            app.pins.distribution.filter ((_, i) => i < 5).map (({name, address, lat, lng}, i) => (\n              <li onClick={() => {setOpen (false); app.location.setCoords (lat, lng)}}>\n                <span>{i + 1}.</span>\n                <span>{name}</span>\n                <span/>\n                <address>{address}</address>\n              </li>\n            ))\n          }\n        </ul>\n      </div>\n    </div>\n  )\n  \n}","import { useApp } from \"../AppProvider\";\n\nexport default function Log () {\n  const app = useApp ();\n  \n  return (\n    <div style={{display: 'none'}}>\n      <ul>\n        <li>[{app.location.coords.lng}, {app.location.coords.lat}]</li>\n        {\n          app.pins.pins.map (pin => (\n            <li>{JSON.stringify (pin)}</li>\n          ))\n        }\n      </ul>\n    </div>\n  )\n}","import { useApp } from \"../AppProvider\";\nimport OlMap from 'ol/Map';\nimport OlView from 'ol/View';\nimport OlTileLayer from 'ol/layer/Tile';\nimport OlVectorLayer from 'ol/layer/Vector';\nimport OlVectorSource from 'ol/source/Vector';\nimport GeoJSON from 'ol/format/GeoJSON';\nimport OSM from 'ol/source/OSM';\nimport {Style} from 'ol/style';\nimport IconStyle from 'ol/style/Icon';\nimport {fromLonLat} from 'ol/proj';\nimport { useEffect, useRef, useState } from \"react\";\nimport { location } from \"../img\";\n\nconst style = (feature: any) => new Style ({\n  image: new IconStyle ({\n    src: location,\n    scale: 0.02 + parseInt (feature.get ('litness')) * 0.01,\n  })\n})\n\nexport default function Map () {\n  const app = useApp ();\n  const mapref = useRef<HTMLDivElement> (null);\n  const [map, setMap] = useState<OlMap | null> (null);\n  const [zoom] = useState <number> (15);\n  const [center, setCenter] = useState<number[] | null> (null);\n\n  useEffect (() => {\n\t\tconst options = {\n\t\t\tview: new OlView({ zoom, minZoom: zoom, maxZoom: zoom }),\n\t\t\tlayers: [\n        new OlTileLayer ({source: new OSM ()}),\n        new OlVectorLayer ({\n          source: new OlVectorSource ({\n            features: new GeoJSON().readFeatures(app.pins.featureSet),\n          })\n        })\n      ],\n\t\t\tcontrols: [],\n\t\t\toverlays: []\n\t\t};\n    const _map = new OlMap (options);\n    setMap (_map);\n  }, [])\n\n  useEffect (() => {\n    if (map && mapref.current) map.setTarget (mapref.current);\n  }, [app.location.locationAvailable]);\n\n  useEffect (() => {\n    if (map) {\n      map.getView ().setZoom (zoom);\n    }\n  }, [zoom]);\n\n  useEffect (() => {\n    if (center && map) {\n      map.getView ().setCenter (center);\n    }\n  }, [center]);\n\n  useEffect (() => {\n    if (app.location.coords.lat && app.location.coords.lng) setCenter (fromLonLat ([app.location.coords.lng, app.location.coords.lat]));\n  }, [app.location.coords.lat, app.location.coords.lng])\n\n  useEffect (() => {\n    map?.getLayers ().removeAt (1);\n    const opts = {\n      source: new OlVectorSource ({\n        features: new GeoJSON().readFeatures(app.pins.featureSet),\n      }),\n      style\n    }\n    const layer = new OlVectorLayer (opts);\n    console.log (app.pins.featureSet, layer, opts)\n    map?.getLayers ().push (layer);\n    \n  }, [app.pins.iter]);\n\n  return (\n    <div id=\"ol-map\" className={app.location.locationAvailable ? undefined : 'hidden'} ref={mapref} />\n  )\n}","import Auth from './components/Auth';\nimport DropPin from './components/DropPin';\nimport Friends from './components/Friends';\nimport ListView from './components/ListView';\nimport Log from './components/Log';\nimport Map from './components/Map';\n\nfunction App() {\n  return (\n    <>\n      <Auth />\n      <ListView />\n      <DropPin />\n      <Map />\n      <Log />\n      <Friends />\n    </>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport AppProvider from './AppProvider';\n\nReactDOM.render(\n  <React.StrictMode>\n    <AppProvider>\n      <App />\n    </AppProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}