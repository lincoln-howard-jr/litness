(this.webpackJsonplitness=this.webpackJsonplitness||[]).push([[0],{121:function(e,t,n){},126:function(e,t){},130:function(e,t,n){"use strict";n.r(t);var A=n(13),c=n.n(A),r=n(97),a=n.n(r),s=(n(121),n(16)),i=n(18),o=n.n(i),u=n(32),l=window.arcgisRest,j=new l.ApiKey({key:"AAPK827c8d799c9f479bb6527fdfe01819026nJ4HXONEvXwkFIsjOMskDVGFYKeCgUGlZi9lgE2xnlQ7ROGR9D3ypGuaHv4XcNb"}),f={locationAvailable:!1,places:null,coords:{lat:null,lng:null},getPlaces:function(){return new Promise((function(e){}))}};var d=n(72),b=n(65),p=n(100),O=n(5),h={iter:0,pins:[],featureSet:{type:"FeatureCollection",features:[]},distribution:{},pinErr:null,getPins:function(){},createPin:function(){return new Promise((function(e){return e}))}};var g=n(67),w=function(e){return new Promise(function(){var t=Object(u.a)(o.a.mark((function t(n,A){var c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://1ge3owx5sf.execute-api.us-east-1.amazonaws.com/Prod/usernames/".concat(e));case 3:return c=t.sent,t.t0=n,t.next=7,c.json();case 7:t.t1=t.sent,(0,t.t0)(t.t1),t.next=14;break;case 11:t.prev=11,t.t2=t.catch(0),A(t.t2);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}())},x={ClientId:"2nl7v5gphbluvp0lhu8aooqhe3",UserPoolId:"us-east-1_Xsf7vUqcY"},v={isAuthenticated:!1,promptForCode:!1,headers:{get:{},post:{"Content-Type":""}},authError:null,getCode:function(e){},answer:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){})),logout:function(){return new Promise((function(e){return e()}))}};var m=n(3),C={freeze:function(){return function(){}},user:v,pins:h,location:f},P=Object(A.createContext)(C),B=function(){return Object(A.useContext)(P)};function E(e){var t=Object(A.useState)("none"),n=Object(s.a)(t,2),c=n[0],r=n[1],a=function(){return r("frozen"),function(){r("none")}},i=function(e){var t,n=new g.e(x),c=n.getCurrentUser(),r=Object(A.useState)(""),a=Object(s.a)(r,2),i=a[0],l=a[1],j=Object(A.useState)(null),f=Object(s.a)(j,2),d=f[0],b=f[1],p={get:{"x-amz-access-token":i},post:{"Content-Type":"application/json","x-amz-access-token":i}},O=Object(A.useState)(null),h=Object(s.a)(O,2),v=h[0],m=h[1],C=Object(A.useState)(!1),P=Object(s.a)(C,2),B=P[0],E=P[1],H=Object(A.useState)(!1),k=Object(s.a)(H,2),S=k[0],D=k[1],M=Object(A.useState)((function(e){})),I=Object(s.a)(M,2),Q=I[0],y=I[1],Y=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=4;break}c.getSession((function(e,t){return e?Promise.reject(e):(l(t.getAccessToken().getJwtToken()),b(new g.b({RefreshToken:t.getRefreshToken().getToken()})),E(!0),Promise.resolve())})),e.next=5;break;case 4:return e.abrupt("return",Promise.reject("user dne"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c&&d&&c.refreshSession(d,(function(e){return e?Promise.reject(e):Y()}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(u.a)(o.a.mark((function e(A,r){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[new g.d({Name:"phone_number",Value:t})],n.signUp(t,"Passwords are useless!",a,[],(function(e,t){return e?r(e):((null===t||void 0===t?void 0:t.user)&&(c=t.user),A())}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var A=Object(u.a)(o.a.mark((function A(r){var a,s;return o.a.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:return a=e(),s=!0,A.prev=2,A.next=5,w(r);case 5:s=A.sent,A.next=11;break;case 8:A.prev=8,A.t0=A.catch(2),m("error while checking if user exists");case 11:if(s){A.next=21;break}return A.prev=12,A.next=15,G(r);case 15:A.next=21;break;case 17:return A.prev=17,A.t1=A.catch(12),m("error while registering user"),A.abrupt("return");case 21:t=new g.a({Username:r,ClientMetadata:{phoneNumber:r}}),(c=new g.c({Username:r,Pool:n})).setAuthenticationFlowType("CUSTOM_CHALLENGE"),c.initiateAuth(t,{onSuccess:function(){Y(),a()},onFailure:function(e){m(e),a()},customChallenge:function(){var t=this;y((function(){return function(n){var A;null===(A=c)||void 0===A||A.sendCustomChallengeAnswer(n,t),a=e()}})),D(!0)}});case 25:case"end":return A.stop()}}),A,null,[[2,8],[12,17]])})));return function(e){return A.apply(this,arguments)}}(),N=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y();case 2:return e.next=4,R();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(A.useEffect)((function(){N()}),[]),{isAuthenticated:B,promptForCode:S,headers:p,authError:v,getCode:J,answer:Q,logout:function(){return new Promise(function(){var e=Object(u.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=4;break}return e.abrupt("return",t(c.signOut()));case 4:return e.abrupt("return",n("user dne"));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}}}(a),f=function(){var e=Object(A.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(A.useState)(null),a=Object(s.a)(r,2),i=a[0],f=a[1],d=Object(A.useState)(null),b=Object(s.a)(d,2),p=b[0],O=b[1],h=Object(A.useState)(null),g=Object(s.a)(h,2),w=g[0],x=g[1],v=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(u.a)(o.a.mark((function e(t,n){var A;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.geocode({params:{category:"Arts and Entertainment,Coffee Shop,Nightlife Spot,Parks and Outdoors",location:"".concat(w,",").concat(p),distance:2e3,maxLocations:15},outFields:"*",authentication:j});case 3:A=e.sent,f(A.candidates),t(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),n();case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(e){O(e.coords.latitude),x(e.coords.longitude),c(!0)},C=function(e){c(!1),O(null),x(null),console.log("#watch position error",e)};return Object(A.useEffect)((function(){var e=window.navigator.geolocation.watchPosition(m,C,{enableHighAccuracy:!0,timeout:3e3});return function(){window.navigator.geolocation.clearWatch(e)}}),[]),{locationAvailable:n,places:i,coords:{lat:p,lng:w},getPlaces:v}}(),v=function(e,t,n){var c=Object(A.useState)(h.iter),r=Object(s.a)(c,2),a=r[0],i=r[1],l=Object(A.useState)(h.pins),j=Object(s.a)(l,2),f=j[0],g=j[1],w=Object(A.useState)(h.featureSet),x=Object(s.a)(w,2),v=x[0],m=x[1],C=Object(A.useState)({}),P=Object(s.a)(C,2),B=P[0],E=P[1],H=Object(A.useState)(h.pinErr),k=Object(s.a)(H,2),S=k[0],D=k[1],M=function(){var e=Object(u.a)(o.a.mark((function e(){var n,A,c,r,s,u,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://1ge3owx5sf.execute-api.us-east-1.amazonaws.com/Prod/pins?lat=".concat(t.coords.lat,"&lng=").concat(t.coords.lng,"&r=0.1"));case 3:return n=e.sent,e.next=6,n.json();case 6:A=e.sent,c=A.reduce((function(e,t){return e+t.litness}),0),r=A.reduce((function(e,t){return e.includes(t.placeAddress)?e:[].concat(Object(p.a)(e),[t.placeAddress])}),[]),s=r.map((function(e){return A.filter((function(t){return t.placeAddress===e}))})).map((function(e){return e.reduce((function(e,t){return e+t.litness}),0)/c})),u=r.reduce((function(e,t,n){return Object(b.a)(Object(b.a)({},e),{},Object(d.a)({},t,s[n]))}),{}),E(u),l={type:"FeatureCollection",features:A.map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:Object(O.d)([e.lng,e.lat])},properties:Object(b.a)({},e)}}))},g(A),m(l),i(a+1),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),D((null===e.t0||void 0===e.t0?void 0:e.t0.toString())||"unknown server error");case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}();return Object(A.useEffect)((function(){t.coords.lng&&t.coords.lat&&M()}),[t.coords.lng,t.coords.lat]),{iter:a,pins:f,featureSet:v,distribution:B,pinErr:S,getPins:M,createPin:function(A,c,r){return new Promise(function(){var a=Object(u.a)(o.a.mark((function a(s,i){var u,l;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return u=n(),a.prev=1,l=Object(b.a)(Object(b.a)({},t.coords),{},{litness:A,placeName:c,placeAddress:r}),a.next=5,fetch("https://1ge3owx5sf.execute-api.us-east-1.amazonaws.com/Prod/pins",{method:"post",headers:e.headers.post,body:JSON.stringify(l)});case 5:s(),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(1),D((null===a.t0||void 0===a.t0?void 0:a.t0.toString())||"unknown error"),i(a.t0);case 12:return a.prev=12,u(),a.finish(12);case 15:case"end":return a.stop()}}),a,null,[[1,8,12,15]])})));return function(e,t){return a.apply(this,arguments)}}())}}}(i,f,a),C={freeze:a,user:i,pins:v,location:f};return Object(m.jsxs)(P.Provider,{value:C,children:[Object(m.jsx)("div",{className:"freeze ".concat(c)}),e.children]})}function H(){var e,t=B().user,n=t.isAuthenticated,c=t.promptForCode,r=t.authError,a=t.getCode,i=t.answer,o=Object(A.useState)(""),u=Object(s.a)(o,2),l=u[0],j=u[1],f=Object(A.useRef)(null);return n?null:c?Object(m.jsxs)("div",{className:"auth-container",children:[Object(m.jsx)("header",{children:Object(m.jsx)("p",{children:"We texted you a code! Enter it here!"})}),Object(m.jsx)("input",{ref:f,autoComplete:"one-time-code",placeholder:"Secret code here"}),Object(m.jsx)("button",{onClick:function(){var e;(null===(e=f.current)||void 0===e?void 0:e.value)&&i(f.current.value)},children:"Send Code"})]}):Object(m.jsxs)("div",{className:"auth-conatiner",children:[Object(m.jsx)("header",{children:Object(m.jsx)("h1",{children:"Litness Sign In"})}),r&&Object(m.jsx)("div",{className:"error",children:r}),Object(m.jsx)("input",{type:"text",placeholder:"(012) 345-6789",autoComplete:"off",onChange:function(e){return j(e.target.value.replaceAll(/[^0-9]/g,""))},value:(e=l,e.length>10&&(e=e.substr(0,10)),0===e.length?e:e.length<4?"(".concat(e):e.length<7?"(".concat(e.substr(0,3),") ").concat(e.substr(3)):"(".concat(e.substr(0,3),") ").concat(e.substr(3,3),"-").concat(e.substr(6)))}),Object(m.jsx)("button",{onClick:function(){a(function(e){var t=e.replaceAll(/[^0-9]/g,"");if(10!==t.length)throw new Error("Phone number must be 10 digits, current length: "+t.length);return"+1"+t}(l))},children:"Sign In"})]})}var k=n.p+"static/media/pin.c45e97d1.png",S=n.p+"static/media/fire.4fa412f3.png",D="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAABH0SURBVHic7d3dr2VnQcfxX0ukCmgJIJYhdA6xr4oUaKG0lDItGrWKSCIXXnnplQm+QIjRBDXxyj/CKxM1MUa9MDGBYGKiEpTGlxZRWkrfKO20A9MpIlovdnc5nc45Z7+sZz3Ps57PJ1n3a6/Ze/++Z+1z9iQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADATC6rfQKDuSrJzUlOJXlTklcneTLJ40m+kuRzSZ6rdnYAZZ1OcntW74FvTvLaJOeyeg98NMk/JPmPamcHE3tdko8n+UKS5084/jvJXyb5hSSvqHGyABO7MslvJPmXnPwe+HySLyX5VJI3VjhXmMSrkvxukm9msyf9pV4EH5n9rAGm8cokn8jqJ/xd3gOfS/L7Wd0phW7cnNVtrF2e9Bcff5rVbTKAXlyX5J8yzXvgl5LcMu/pw24+nORCpnnir4//THLNnA8CYEe3ZvW7TVO+B34ryUfnfBCwrY8m+U6mfeKvj4ezqmqAVt2d5NmUeQ/8TpKfm++hwOZuy6pSSzzx18cjEQFAm0qO//q4kOSmuR4QbOIHkjyQsk98EQC0ao7xXx/3J/neeR4WnOwPMs8TXwQArZlz/NfHb83yyOAEV2X15ypzPvmfz+qLM35khscHcJT3Z/c/dd7nOBd/HUUDfi/zP/ndCQBqq/GT/+HjY+UfIhztssz32b8IAFpRe/yfT/KPxR8lHOPG1H0BrA8fBwBzqXXb/+Lj/5K8ofBjhSP9Uuq/CNaHOwFAaS385H/4uKfsw122y2ufQOdO1T6BQ04l+UxEAFDGXVn9Z2Wvqn0ih3i/24MA2E9LAZCszudv4+MAYFrvT/IXaWv8Ex8B7EUA7OfK2idwCT+U5G+SXF/7RIBFuCvJXyd5Te0TuQRfCLQHAbCfJ2ufwBFOJfl0RACwn7uS/FXa+8l/7XztE+iZANjP47VP4Binknw2Pg4AdtPqbf/DHq59Aj0TAPt5qPYJnMDHAcAuWr7tf9h9tU+AcV2d+n8Gs+mfCIoAYBN3pa0/9TvquJDkikLXADZyb+q/EDY5fFkQcJJWvuRnk+PPCl0D2Nivp/4LYdPDnQDgKGfSx0/+6+MjRa4CbOHKJM+k/oth0+PRiADgpc6kr/G/L36HjUZ8PPVfENscPg4A1nq67b8+PlTkSsAOXpnk86n/otjmcCcAOJPV39LXfj/a5vjjEhcC9nFtkrOp/+IQAcAmzqS/8b8vbX4DK+SO9PU5mgiAMZ1Jf+P/cJKD6S8FTKfHz9P8TgCM44709x71WJIbS1wMmFqvEfCjJS4G0AzjDzMQAUBLehz/x2P86ZQIAFrQ6/j7aJKuiQCgJuMPFYkAoAbjDw0QAcCcjD80RAQAczD+0CARAJRk/KFhIgAowfhDB3qMgK9FBECr7kjyjdR/nzD+sAERAEzB+EOHRACwD+MPHRMBwC6MPyyACAC2YfxhQXr8DV4RAPN7X4w/LI4IAI5j/GHBRABwKcYfBiACgMOMPwxEBACJ8YchiQAYm/GHgYkAGJPxB0QADMb4Ay/qNQLeVuJiwIIZf+BlRAAsm/EHjiQCYJmMP3CiHr8HXATA0Yw/sDERAMvQ6/j7JV+oSARA34w/sDMRAH0y/sDeRAD0xfgDkxEB0AfjD0xOBEDbehx/3+oJnej1DUYEsHS3p8/XpvGHjogAaIvxB2YjAqANxh+YnQiAuow/UI0IgDqMP1CdCIB5GX+gGSIA5mH8geaIACjL+APNEgFQhvEHmicCYFrGH+iGCIBpGH+gO71GwI+VuBiwA+MPdKvHCHgiIoD6eh1/d9GAF4kA2M7tSc6l/uvA+AN7EwGwGeMPLI4IgOMZf2CxRABcmvEHFk8EwEsZf2AYPf6GswighNti/IHBiABGZ/yBYYkARmX8geGJAEZj/AFeIAIYhfEHuIgIYOmMP8ARRABLZfwBTiACWBrjD7AhEcBSGH+ALYkAemf8AXYkAuiV8QfYU4/fky4Cxtbj+D8R4w80SATQi17H33MVaJYIoHXGH6AQEUCrjD9AYSKA1tyc5GzqP888J4HFEwG0wvgDzEwEUJvxB6jE567UYvwBKhMBzM34AzRCBDAX4w/QGBFAacYfoFG9RsDbS1wMJmX8ARonApia8QfohAhgKsYfoDMigH0Zf4BO9RgBZ7MaHuoy/gCdEwFsy/gDLIQIYFPGH2BhRAAnMf4ACyUCOMq7YvwBFq3Hn/JEQFnvSvJU6v87G3+AwkQAa8YfYDAiAOMPMCgRMC7jDzA4ETAe4w9AEhEwkl7H31dEAxQiApbP+ANwSSJguYw/AMcSAcvT4/j7NwWoQAQsh/EHYCsioH/GH4CdiIB+GX8A9tJrBNxS4mJ0wvgDMAkR0A/jD8CkRED7jD8ARYiAdhl/AIq6OX0OzZIjwPgDMIteB2eJEfDO9PlvYfwBOiUC6jP+AFQhAuox/gBU1WMEPJ2+I8D4A9AEETAf4w9AU0RAecYfgCaJgHJ6Hf8eri0AExAB0zP+AHRBBEzH+APQFRGwP+MPQJdEwO6MPwBdEwHb63H8a18zABokAjZn/AFYFBFwsncmebLA41jSNQKgQyLgaMYfgEUTAS9n/AEYQq8R8O4C18L4AzAUEWD8ARhUr7/xPkUEvCPGH4CBjRgBxh8AMlYEGH8AOGSECDD+AHAJS44A4w8Ax1hiBBh/ANjAkiKg1/Ev8Z0HAHCiJUSA8QeAHfQcAcYfAPZwS5KzqT+O2xxPpb9weSqrb2cEgGb0eCegp8NP/gA0q8fvze/hMP4ANE8EGH8ABiUCjD8AgxIBxh+AQYkA4w/AoESA8QdgUCLA+AMwqB6/dc/4A8AERIDxB2BQIsD4AzAoEWD8ARjU6BFg/AEY1qgRYPwBGN5oEfB0kvdMcuUAoHOjRIDxB4CLLD0CjD8AHGGpEWD8AeAES4sA4w8AG1pKBDwT4w8AW+k9Aow/AOyo1wgw/tC4y2ufAAAA8F29/vTvLgAA7Kj38T8cAbdOfG0AYJGWMv4iAAA2tLTxFwEAcIKljr8IAIAjLH38RQAAXGSU8RcBAPCC0cZfBAAwvFHHXwQAMKzRx18EADAc4y8CABiM8RcBAAzG+IsAAAZzU4y/CABgKDcl+Xrqj2svhwgAoHvGXwQAMBjjLwIAGIzxFwEADMb4iwAABmP8y0XAe7f4dwCA2Rh/EQDAYHr8O/+nkjzRwHlsGwE+DgCgCT3+5P90kncnuSHJYw2cz7YR4E4AAFX1PP5rIgAAtrCE8V8TAQCwgSWN/5oIAIBjLHH813qMgHMRAQAUtuTxXxMBAHDICOO/JgIAIGON/5oIAGBoI47/2g1JHm3g8YgAAGb19ow7/msiAIChGP/vEgEADMH4v5wIAGDRjP/RRAAAi2T8TyYCAFgU47+5HiPgfJI7S1wMAPrV6/i/p8TF2JAIAKBrxn93IgCALhn//YkAALpyY/r7qtvWxn9NBADQBeM/PREAQNN6HP9n0vb4r4kAAJpk/Mu7Pn1GwAdKXAwA6jP+8xEBADTB+M9PBABQlfGvRwQAUIXxr08EADAr498OEQDALG6I8W+NCACgKOPfLhEAQBHGv30iAIBJGf9+iAAAJmH8+yMCANiL8e/X9UkeSf1/DxEA0Jlex//WEhejU71GwJkC1wKADRj/5RABAGzE+C+PCADgWMZ/uUQAAJdk/JdPBADwEsZ/HCIAgCTGf0QiAGBwN6S/L4wx/tMQAQCDMv6IAIDBGH/WRADAIIw/FxMBAAtn/DmKCABYKOPPSa6LCABYFOPPpkQAwEIYf7YlAgA6Z/zZlQgA6JTxZ18iAKAzxp+piACATlyfPsf/vSUuBpPoNQLuKnExAFpk/Cmlxwh4NiIAGIDxpzQRANAY489cRABAI4w/cxMBAJX1OP7nYvyXQAQAVGL8qU0EAMzM+NMKEQAwE+NPa0QAQGHGn1aJAIBCjD+tEwEAEzP+9OK6JA+n/vNPBADdM/705tqIAIC9XJ/+bqkafxIRALAz40/vRADAlnoc//NJ7ixxMeiaCADYkPFnaUQAwAmMP0slAgCOYPxZul4j4O4SFwMgMf6MQwQAvMD4MxoRAAzP+DMqEQAMy/gzOhEADMf4w4oIAIbR4/+Ydj7JB0pcDIgIAAZg/OHSRACwWMYfjicCgMUx/rAZEQAshvGH7YgAoHvGH3YjAoBuGX/YjwgAumP8YRoiAOiG8YdpiQCgecYfyhABQLOMP5QlAoDmGH+Yx7VJvpr6rx8RAHQ7/mcKXAuYwzXpMwI+WOJiAHUYf6hDBADVGH+o6yDJA6n/uhIBMBDjD204iAgAZmL8oS0HEQFAYcYf2nQQEQAUcm2MP7TsICIAmFiPX0Bi/BnRQUQAMBHjD305iAgA9mT8oU8HEQHAjow/9O0gIgDYkvGHZTiICAA2ZPxhWU6nzwj48RIXA7g04w/L1GMEXIgIgFkYf1g2EQC8jPGHMYgA4EXGH8YiAoAux//ZGH/YlwiAgfU6/neVuBgwIBEAAzL+QCICYCjGHzhMBMAAjD9wKSIAFsz4A8cRAbBAxh/YxOkkX079178IgAkYf2AbIgAWwPgDuxAB0DHjD+xDBECHjD8wBREAHTH+wJREAHTA+AMl9BgB30ryMyUuBrTmmhh/oBwRAA26JslXU//FZvxh2UQANMT4A3MSAdCAg/T31Z3GH/onAqCigxh/oB4RABUcxPgD9V0dEQCzOUif4393gWsB1CcCYAYHMf5Ae0QAFHQQ4w+0SwRAAaeTPJT6L5ZtjvNJzhS4FkC73prkK6n//rPNcSHJnSUuBuzrtUnuT/0XifEHNvHWJA+m/vvQNsfTSa4vcC1gL3+S+i8O4w9so8cI+EKSKwpcC9jJh1P/RbHN4TN/YK3H3wn4ZJErAVu6PMkXU/8Fsc34nylxIYBu9XYn4FxWH7tCVT+f+i8G4w/sq7cI+ESRqwBb+PPUfyFsOv5u+wPH6enjgH8vdA1gI1ckeS71XwibjL+v9wU20dOdgNNlLgGc7LbUfwEYf2BqvUTALxZ6/EO4vPYJdO6g9gmc4EKSDyX5TO0TAbryQFZfuvPl2idygrfUPoGeCYD9vKn2CRxjPf6frn0iQJceyuruYcsRcFXtE+iZANjPG2qfwBEuJPnZGH9gPw8l+WBWXxvcotfXPoGeCYD9fKP2CVyC2/7AlB5Mux8HnK19Aj0TAPt5rPYJXMRtf6CEVj8OeLz2CfRMAOzn0doncIjxB0pafxzwYOXzOOyR2ifAuF6X5H9T/09hns3qhQlQ2tVJ/iv13/eeT/LDhR8rHOvvU3/8fcMfMKeDrP5UsOZ73xdLP0g4ya/E+APjOUjdCPjt4o8QTvD9SZ5OnfF32x+oqdbHAc8m+cEZHh+c6JPxkz8wpoPMfyfgd+Z4YLCJK5L8a4w/MKaDzBcB9yd51SyPCjb0tiTnY/yBMZ1O+Qg4n+SmuR4QbOOnk3w7xh8Y0+msviyoxHvgt5PcM99Dge3dk+nvBDyV5H1zPgiAHZ1Kcm+mfQ/8ZpKfnPNBwK5uSnJfpnnify6+7ALoy2uS/GGmeQ+8N8kNs5497On7knwqu98NOJvkV5N8z8znDTCVn8judwO+nuTX4j2Qjr0+yW8m+bds9qT/fJKPZfX9AgC9uyzJTyX5oyTncvz73/8k+WySX07y6honO5LLap/AYE4nuS2rz8jenOTKrH7SfzTJw0n+Lu39D4MAU3lFknckeUtW74FvTPJMkq9l9R74z1l93g8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwJP8PxHXUjW+9FTUAAAAASUVORK5CYII=",M=n.p+"static/media/caret.bfd98d54.svg";function I(){var e=B(),t=Object(A.useRef)(null),n=Object(A.useState)(!1),c=Object(s.a)(n,2),r=c[0],a=c[1],i=Object(A.useState)(!1),l=Object(s.a)(i,2),j=l[0],f=l[1],d=Object(A.useState)(0),b=Object(s.a)(d,2),p=b[0],O=b[1],h=Object(A.useState)(0),g=Object(s.a)(h,2),w=g[0],x=g[1],v=Object(A.useState)(!1),C=Object(s.a)(v,2),P=C[0],E=C[1],H=function(){a(!1),f(!1),O(0),x(0),E(!1)},I=function(){var n=Object(u.a)(o.a.mark((function n(){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.pins.createPin(p,e.location.places[w].attributes.PlaceName,e.location.places[w].attributes.Place_addr);case 3:n.next=8;break;case 5:n.prev=5,n.t0=n.catch(0),alert((null===n.t0||void 0===n.t0?void 0:n.t0.toString())||"error while creating pin");case 8:return n.prev=8,(A=null)&&A.target!==t.current||H(),n.finish(8);case 11:case"end":return n.stop()}var A}),n,null,[[0,5,8,11]])})));return function(){return n.apply(this,arguments)}}(),Q=function(t){return Object(u.a)(o.a.mark((function n(){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,f(!0),a(!1),O(t),n.next=6,e.location.getPlaces();case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),alert("error while getting nearby places");case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))};return e.user.isAuthenticated&&e.location.locationAvailable?e.location.places&&p>0?Object(m.jsx)("div",{className:"drop-pin-backdrop",children:Object(m.jsxs)("div",{className:"drop-pin place-list",children:[Object(m.jsx)("div",{onClick:H,className:"exit",children:Object(m.jsx)("img",{src:D})}),Object(m.jsx)("header",{children:Object(m.jsx)("h1",{children:"Select current location:"})}),Object(m.jsx)("button",{onClick:I,children:"That's It!"}),Object(m.jsxs)("div",{onClick:function(){return E(!P)},className:P?"select open":"select",children:[Object(m.jsx)("h3",{children:e.location.places[w].attributes.PlaceName}),Object(m.jsx)("span",{children:Object(m.jsx)("img",{src:M})})]}),Object(m.jsx)("div",{className:"select-dropdown",children:e.location.places.map((function(e,t){return t!==w&&Object(m.jsx)("div",{onClick:function(){x(t),E(!1)},className:"select-option",children:Object(m.jsx)("h3",{children:e.attributes.PlaceName})})}))})]})}):j?Object(m.jsx)("div",{className:"drop-pin-backdrop",children:Object(m.jsxs)("div",{className:"drop-pin place-list",children:[Object(m.jsx)("div",{className:"drop-pin place placeholder",children:Object(m.jsx)("header",{children:Object(m.jsx)("h2",{children:"..."})})}),Object(m.jsx)("div",{className:"drop-pin place placeholder",children:Object(m.jsx)("header",{children:Object(m.jsx)("h2",{children:"..."})})}),Object(m.jsx)("div",{className:"drop-pin place placeholder",children:Object(m.jsx)("header",{children:Object(m.jsx)("h2",{children:"..."})})}),Object(m.jsx)("div",{className:"drop-pin place placeholder",children:Object(m.jsx)("header",{children:Object(m.jsx)("h2",{children:"..."})})}),Object(m.jsx)("div",{className:"drop-pin place placeholder",children:Object(m.jsx)("header",{children:Object(m.jsx)("h2",{children:"..."})})})]})}):r?Object(m.jsx)("div",{className:"drop-pin-backdrop",children:Object(m.jsxs)("div",{className:"drop-pin-list",children:[Object(m.jsx)("button",{onClick:function(){return a(!1)},className:"fire-button cancel",children:Object(m.jsx)("img",{src:D})}),Object(m.jsx)("button",{onClick:Q(1),className:"fire-button one",children:Object(m.jsx)("img",{src:S})}),Object(m.jsxs)("button",{onClick:Q(2),className:"fire-button two",children:[Object(m.jsx)("img",{src:S}),Object(m.jsx)("img",{src:S})]}),Object(m.jsxs)("button",{onClick:Q(3),className:"fire-button three",children:[Object(m.jsx)("img",{src:S}),Object(m.jsx)("img",{src:S}),Object(m.jsx)("img",{src:S})]}),Object(m.jsxs)("button",{onClick:Q(4),className:"fire-button four",children:[Object(m.jsx)("img",{src:S}),Object(m.jsx)("img",{src:S}),Object(m.jsx)("img",{src:S}),Object(m.jsx)("img",{src:S})]}),Object(m.jsxs)("button",{onClick:Q(5),className:"fire-button five",children:[Object(m.jsx)("img",{src:S}),Object(m.jsx)("img",{src:S}),Object(m.jsx)("img",{src:S}),Object(m.jsx)("img",{src:S}),Object(m.jsx)("img",{src:S})]})]})}):Object(m.jsx)("button",{onClick:function(){return a(!0)},className:"drop-pin-button",children:Object(m.jsx)("img",{src:k})}):null}function Q(){var e=B();return Object(m.jsx)("div",{style:{display:"none"},children:Object(m.jsxs)("ul",{children:[Object(m.jsxs)("li",{children:["[",e.location.coords.lng,", ",e.location.coords.lat,"]"]}),e.pins.pins.map((function(e){return Object(m.jsx)("li",{children:JSON.stringify(e)})}))]})})}var y=n(98),Y=n(54),R=n(101),G=n(90),J=n(92),N=n(91),T=n(99),U=n(93),z=n(86),F=n(70),X=function(e){return new U.b({image:new F.a({radius:2*parseInt(e.get("litness")),fill:new z.a({color:[255,0,0,parseInt(e.get("litness"))/25]})})})};function L(){var e=B(),t=Object(A.useRef)(null),n=Object(A.useState)(null),c=Object(s.a)(n,2),r=c[0],a=c[1],i=Object(A.useState)(16),o=Object(s.a)(i,2),u=o[0],l=(o[1],Object(A.useState)(null)),j=Object(s.a)(l,2),f=j[0],d=j[1];return Object(A.useEffect)((function(){var t={view:new Y.a({zoom:u,minZoom:u,maxZoom:u}),layers:[new R.a({source:new T.a}),new G.a({source:new J.a({features:(new N.a).readFeatures(e.pins.featureSet)})})],controls:[],overlays:[]},n=new y.a(t);a(n)}),[]),Object(A.useEffect)((function(){r&&t.current&&r.setTarget(t.current)}),[e.location.locationAvailable]),Object(A.useEffect)((function(){r&&r.getView().setZoom(u)}),[u]),Object(A.useEffect)((function(){f&&r&&r.getView().setCenter(f)}),[f]),Object(A.useEffect)((function(){e.location.coords.lat&&e.location.coords.lng&&d(Object(O.d)([e.location.coords.lng,e.location.coords.lat]))}),[e.location.coords.lat,e.location.coords.lng]),Object(A.useEffect)((function(){null===r||void 0===r||r.getLayers().removeAt(1);var t={source:new J.a({features:(new N.a).readFeatures(e.pins.featureSet)}),style:X},n=new G.a(t);console.log(e.pins.featureSet,n,t),null===r||void 0===r||r.getLayers().push(n)}),[e.pins.iter]),Object(m.jsx)("div",{id:"ol-map",className:e.user.isAuthenticated?void 0:"hidden",ref:t})}var K=function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(H,{}),Object(m.jsx)(I,{}),Object(m.jsx)(L,{}),Object(m.jsx)(Q,{})]})},Z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,131)).then((function(t){var n=t.getCLS,A=t.getFID,c=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),A(e),c(e),r(e),a(e)}))};a.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(E,{children:Object(m.jsx)(K,{})})}),document.getElementById("root")),Z()}},[[130,1,2]]]);
//# sourceMappingURL=main.e68abb03.chunk.js.map